<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script>

$(document).ready(function(){
  $("#run-button").click(() => {
  
	const solutionLogElement = $('#solution-log');
	
	solutionLogElement.text('');
	$('#analysis').text('');
	
	//$('#note-text').html('<b>Scroll all the way down to view the whole solution.</b>');
	
    runSolution((logText) => solutionLogElement.append(`${logText} <br><br>`));
	
  });
});

class Word {
	constructor(pronunciation, meaning) {
		this.pronunciation = pronunciation;
		this.meaning = meaning === true;
	}
	
	getPronunciation() {
		return this.pronunciation;
	}
	
	getMeaning() {
		return this.meaning;
	}
}

class Overlord {
	constructor(identity, trueWord, falseWord) {
		this.identity = identity;
		this.trueWord = trueWord;
		this.falseWord = falseWord;
	}

	getIdentity(){
		return this.identity;
	}

	get trueAnswer (){
		return this.trueWord;
	}

	get falseAnswer (){
		return this.falseWord;
	}

	getAnswer(id, wordReference) {
		throw new Exception('Not supported');

	}
}


class OverlordTee extends Overlord{
	constructor(trueWord, falseWord) {
		super('Tee', trueWord, falseWord);
	}

	getAnswer(id, wordReference) {
		
		if (id == obviousQuestion.id){
			return this.trueAnswer;
			
		} else if (id == referenceQuestion.id){
		
			if (wordReference.getMeaning() == true) {
				return this.trueAnswer;
			} else if (wordReference.getMeaning() == false){
				return this.falseAnswer;
			}
		}
		return "Hmm?"; //If this answer is reached, something is wrong with my code.
	}
}

class OverlordEff extends Overlord{
	constructor(trueWord, falseWord) {
		super('Eff', trueWord, falseWord);
	}

	getAnswer(id, wordReference) {
		
		if (id == obviousQuestion.id){
			return this.falseAnswer;
			
		} else if (id == referenceQuestion.id){

			if (wordReference.getMeaning() == true) {
				return this.falseAnswer;
			} else if (wordReference.getMeaning() == false){
				return this.trueAnswer;
			}
		}
		return "Hmm?";
	}
}

class OverlordArr extends Overlord{
	constructor(trueWord, falseWord) {
		super('Arr', trueWord, falseWord);
	}

	getAnswer(id) {
		const randomizer = getRandomInt(2);
		return randomizer == 0 ? this.trueAnswer : this.falseAnswer;
	}
}



function getRandomInt(max) {
  return Math.floor(Math.random() * Math.floor(max));
}

const obviousQuestion = {
	id: 0,
	question: 'Is the sky blue?',
	description: 'An obvious question that you know the answer to.'
}

const referenceQuestion = {
	id: 1,
	question: 'Was the answer to the first question a yes?',
	description: "Ask an overlord information on another's answer."
}

const runSolution = (printFunction) => {

	printFunction('Starting program..');

	const t0 = performance.now()

	//Word meanings are hardcoded for now. TODO: Make randomization.
	const wordForTrue = new Word('Oko', true);
	const wordForfalse = new Word('Unu', false);

	const tee = new OverlordTee(wordForTrue, wordForfalse);
	const eff = new OverlordEff(wordForTrue, wordForfalse);
	const arr = new OverlordArr(wordForTrue, wordForfalse);
	
	printFunction(obviousQuestion.question);
	
	const anwerOfTeeQuestion1=tee.getAnswer(obviousQuestion.id);

	printFunction(`Overlord 1: ${anwerOfTeeQuestion1.getPronunciation()}`);
	
	printFunction(referenceQuestion.question);
	
	printFunction(`Overlord 1: ${tee.getAnswer(referenceQuestion.id, anwerOfTeeQuestion1).getPronunciation()}`);
	printFunction(`Overlord 2: ${eff.getAnswer(referenceQuestion.id, anwerOfTeeQuestion1).getPronunciation()}`);
	printFunction(`Overlord 3: ${arr.getAnswer(referenceQuestion.id, anwerOfTeeQuestion1).getPronunciation()}`);
	
	printFunction('Round 2..');
	
	const t1 = performance.now();

	//solutionTextHtmlElement.append('See thorough logging in the browser console.');
	solutionTextHtmlElement.append('<br>');
	solutionTextHtmlElement.append('<br>');
	solutionTextHtmlElement.append(`The program took ${t1 - t0} milliseconds to run.<br>`);
	solutionTextHtmlElement.append('<br>');
	solutionTextHtmlElement.append('Program finished.');
}

</script>

<body>

<h1>Three Alien Overlords</h1>
<h2>Introduction</h2>
<a>Source of this riddle is on</a> <a href="https://www.youtube.com/watch?v=LKvjIsyYng8">this youtube video</a><a>. I am writing this program to help me solve the riddle without looking at the solution.</a>
<p>I don't expect this to be easy and I don't expect to reach a solution with this program alone. The goal is to learn as much as possible of the puzzle with this program.</p>
<h2>Deductions</h2>
<p>Here are deductions that I have made this far</p>
<li>The odds of guessing the overlords correctly is 1/3 * 1/2 = 1/6 or about 16.7%. The goal is for the questions to narrow that down to a higher percentage.</li>
<li>The correct solution will have a 100% success rate, regardless of the order that the overlords appear and what the meaning for the words oko and unu are.</li>
<button id="run-button">Run</button>
<br>
<p id="note-text"></p>
<br>
<p id="solution-log"></p>
<br>
<br>
<p id="analysis"></p>

</body>
