<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script>

$(document).ready(function(){
  $("#run-button").click(() => {
  
	const solutionLogElement = $('#solution-log');
	
	solutionLogElement.text('');
	$('#analysis').text('');
	
	//$('#note-text').html('<b>Scroll all the way down to view the whole solution.</b>');
	
    runSolution((logText) => solutionLogElement.append(`${logText} <br><br>`));
	
  });
});

class Word {
	constructor(pronunciation, meaning) {
		this.pronunciation = pronunciation;
		this.meaning = meaning === true;
	}
	
	getPronunciation() {
		return this.pronunciation;
	}
	
	getMeaning() {
		return this.meaning;
	}
}

class Overlord {
	constructor(identity, trueWord, falseWord) {
		this.identity = identity;
		this.trueWord = trueWord;
		this.falseWord = falseWord;
	}

	getIdentity(){
		return this.identity;
	}

	get trueAnswer (){
		return this.trueWord;
	}

	get falseAnswer (){
		return this.falseWord;
	}

	getAnswer(id, wordReference) {
		throw new Exception('Not supported');

	}
}


class OverlordTee extends Overlord{
	constructor(trueWord, falseWord) {
		super('Tee', trueWord, falseWord);
	}

	getAnswer(id, wordReference) {
		
		if (id == obviousQuestion.id){
			return this.trueAnswer;
			
		} else if (id == referenceQuestion.id){
		
			if (wordReference.getMeaning() == true) {
				return this.trueAnswer;
			} else if (wordReference.getMeaning() == false){
				return this.falseAnswer;
			}
		}
		return "Hmm?"; //If this answer is reached, something is wrong with my code.
	}
}

class OverlordEff extends Overlord{
	constructor(trueWord, falseWord) {
		super('Eff', trueWord, falseWord);
	}

	getAnswer(id, wordReference) {
		
		if (id == obviousQuestion.id){
			return this.falseAnswer;
			
		} else if (id == referenceQuestion.id){

			if (wordReference.getMeaning() == true) {
				return this.falseAnswer;
			} else if (wordReference.getMeaning() == false){
				return this.trueAnswer;
			}
		}
		return "Hmm?";
	}
}

class OverlordArr extends Overlord{
	constructor(trueWord, falseWord) {
		super('Arr', trueWord, falseWord);
	}

	getAnswer(id) {
		const randomizer = getRandomInt(2);
		return randomizer == 0 ? this.trueAnswer : this.falseAnswer;
	}
}



function getRandomInt(max) {
  return Math.floor(Math.random() * Math.floor(max));
}

const obviousQuestion = {
	id: 0,
	question: 'Is the sky blue?',
	description: 'An obvious question that you know the answer to.'
}

const referenceQuestion = {
	id: 1,
	question: 'Was the answer to the first question a yes?',
	description: "Ask an overlord information on another's answer."
}

const runSolution = (printFunction) => {

	printFunction('Starting program..');

	const t0 = performance.now();

	const wordPronunciations = shuffle(['Oko', 'Unu']);
	
	const wordForTrue = new Word(wordPronunciations[0], true);
	const wordForfalse = new Word(wordPronunciations[1], false);
	
	console.log(wordForTrue, wordForfalse);
	
	const tee = new OverlordTee(wordForTrue, wordForfalse);
	const eff = new OverlordEff(wordForTrue, wordForfalse);
	const arr = new OverlordArr(wordForTrue, wordForfalse);
	
	const overlords = shuffle([tee, eff, arr])
	
	const [overlord1, overlord2, overlord3] = overlords;
	console.log(overlords);
	
	printFunction(obviousQuestion.question);
	
	const anwerOfLord1Question1 = overlord1.getAnswer(obviousQuestion.id);

	printFunction(`Overlord 1: ${anwerOfLord1Question1.getPronunciation()}`);
	
	printFunction(referenceQuestion.question);
	
	printFunction(`Overlord 1: ${overlord1.getAnswer(referenceQuestion.id, anwerOfLord1Question1).getPronunciation()}`);
	printFunction(`Overlord 2: ${overlord2.getAnswer(referenceQuestion.id, anwerOfLord1Question1).getPronunciation()}`);
	printFunction(`Overlord 3: ${overlord3.getAnswer(referenceQuestion.id, anwerOfLord1Question1).getPronunciation()}`);
	
	printFunction('Round 2..');
	
	const anwerOfLord2Question1 = overlord2.getAnswer(obviousQuestion.id);

	printFunction(`Overlord 2: ${anwerOfLord2Question1.getPronunciation()}`);
	
	printFunction(referenceQuestion.question);
	
	printFunction(`Overlord 1: ${overlord1.getAnswer(referenceQuestion.id, anwerOfLord2Question1).getPronunciation()}`);
	printFunction(`Overlord 2: ${overlord2.getAnswer(referenceQuestion.id, anwerOfLord2Question1).getPronunciation()}`);
	printFunction(`Overlord 3: ${overlord3.getAnswer(referenceQuestion.id, anwerOfLord2Question1).getPronunciation()}`);
	
	printFunction('Round 3..');
	
	const anwerOfLord3Question1 = overlord3.getAnswer(obviousQuestion.id);

	printFunction(`Overlord 3: ${anwerOfLord3Question1.getPronunciation()}`);
	
	printFunction(referenceQuestion.question);
	
	printFunction(`Overlord 1: ${overlord1.getAnswer(referenceQuestion.id, anwerOfLord3Question1).getPronunciation()}`);
	printFunction(`Overlord 2: ${overlord2.getAnswer(referenceQuestion.id, anwerOfLord3Question1).getPronunciation()}`);
	printFunction(`Overlord 3: ${overlord3.getAnswer(referenceQuestion.id, anwerOfLord3Question1).getPronunciation()}`);
	
	const t1 = performance.now();

	printFunction(`The program took ${t1 - t0} milliseconds to run.<br>`);

	printFunction('Program finished.');
}

function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

</script>

<body>

<h1>Three Alien Overlords</h1>
<h2>Introduction</h2>
<a>Source of this riddle is on</a> <a href="https://www.youtube.com/watch?v=LKvjIsyYng8">this youtube video</a><a>. I am writing this program to help me solve the riddle without looking at the solution.</a>
<p>I don't expect this to be easy and I don't expect to reach a solution with this program alone. The goal is to learn as much as possible of the puzzle with this program.</p>
<h2>Deductions</h2>
<p>Here are deductions that I have made this far</p>
<li>The odds of guessing the overlords correctly is 1/3 * 1/2 = 1/6 or about 16.7%. The goal is for the questions to narrow that down to a higher percentage.</li>
<li>The correct solution will have a 100% success rate, regardless of the order that the overlords appear and what the meaning for the words oko and unu are.</li>
<button id="run-button">Run</button>
<br>
<p id="note-text"></p>
<br>
<p id="solution-log"></p>
<br>
<br>
<p id="analysis"></p>

</body>
